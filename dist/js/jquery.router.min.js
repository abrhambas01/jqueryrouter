!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.jqueryrouter={})}(this,function(t){"use strict";function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(a){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=a,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return a}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,n=(function(t,e){t.exports=function(){function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a="undefined"!=typeof window,t=void 0!==c,o=Array.isArray;function i(t){return t=(t+"").trim(),!(-1<["null","undefined",""].indexOf(t)||isNaN(Number(t)))}function y(t){return/\[/.test(t)}function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a?window.location.search:"",e=(t=decodeURIComponent(t).replace("?","").trim()).split("&"),n={};return t&&e.forEach(function(t){var e=t.split("=");y.apply(void 0,r(e))?function t(e,n,r){var a,i,o,u=e.match(/([^\[]+)\[([^\[]*)\]/)||[];if(3===u.length){var c=d(u,3),s=c[1],f=c[2];if(y(e=e.replace(/\[([^\[]*)\]/,"")))""===f&&(f="0"),e=e.replace(/[^\[]+/,f),t(e,n,r[s]=v(r[s],f).ob);else if(f){var h=v(r[s],f),l=h.ob,p=h.push;r[s]=l,p?r[s].push((a={},i=f,o=w(n),i in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a)):r[s][f]=w(n)}else g([u[1],n],r,!0)}}.apply(void 0,r(e).concat([n])):g(e,n)}),n}function u(t,e){return void 0===t?e?[]:{}:e?t:(r={},o(n=t)&&n.forEach(function(t,e){r[e]=t}),r);var n,r}function v(t,e){return null==(n=t)||o(n)||"[object Object]"!==n.toString()?o(t)||void 0===t?{ob:u(t,i(e))}:{ob:[t],push:null!==t}:{ob:t};var n}function g(t,e,n){var r=d(t,2),a=r[0],i=r[1];i=w(i),a in e?(e[a]=o(e[a])?e[a]:[e[a]],e[a].push(i)):e[a]=n?[i]:i}function w(t){if(null==t)return"";if("string"!=typeof t)return t;if(i(t=t.trim()))return+t;switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;case"NaN":return NaN;default:return t}}function n(){return e.apply(this,arguments)}return a&&window.jQuery&&(window.jQuery.deparam=n),t&&c.jQuery&&(c.jQuery.deparam=n),n}()}(e={exports:{}},e.exports),e.exports);function o(t){return t instanceof Node||t===window}function u(t){return"function"==typeof t}function s(t){return t.split(" ").map(function(t){return!!t.trim()})}var r=function(){function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.length=0,(t=o(t)?[t]:t instanceof NodeList||t instanceof HTMLCollection?i(t):"string"==typeof t?i(document.querySelectorAll(t)):Array.isArray(t)?t.map(o):t instanceof f?t.map():null)&&t.forEach(function(t){e[e.length++]=t})}var t,e,r;return t=n,(e=[{key:"each",value:function(t){for(var e=0;e<this.length;e++)if(u(t)){var n=t.apply(this[e],[e,this[e],this]);if(!0===n)continue;if(!1===n)break}return this}},{key:"addClass",value:function(t){if("string"==typeof t){var n=s(t);this.each(function(){var t=this.getAttribute("class");if("string"==typeof t){var e=s(t);n.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this.setAttribute("class",e.join(" "))}else this.setAttribute("class",n.join(" "))})}return this}},{key:"removeClass",value:function(t){if("string"==typeof t){var e=s(t),r=0;this.each(function(){var t=this.getAttribute("class");if("string"==typeof t){var n=s(t);e.forEach(function(t){var e=n.indexOf(t);-1<e&&(n.splice(e,1),r+=1)}),0<r&&this.setAttribute("class",n.join(" "))}})}return this}},{key:"on",value:function(n,r,a){return this.each(function(t,e){e.addEventListener(n,function(t){var e=t.detail,n=e&&e.customData?i(e.customData):[];u(r)&&r.apply(this,[event].concat(i(n)))},a)}),this}},{key:"trigger",value:function(t,e){var n=new CustomEvent(t,{cancelable:!0,bubbles:!0,detail:{customData:e}});return this.each(function(t,e){e.dispatchEvent(n)}),this}},{key:"map",value:function(){var t=[];return this.each(function(){-1===t.indexOf(this)&&t.push(this)}),t}},{key:"add",value:function(t){var e=this.map(),n=f(t),r=this;return n.each(function(){-1===e.indexOf(this)&&(r[r.length++]=this)}),this}},{key:"filter",value:function(t){var e=f();if(u(t))this.each(function(){t(this)&&e.add(this)});else{var n=f(t).map();this.each(function(){-1<n.indexOf(this)&&e.add(this)})}return e}},{key:"find",value:function(t){var e=[],n=f();return this.each(function(){i(this.childNodes).forEach(function(t){-1===e.indexOf(t)&&1===t.nodeType&&e.push(t)})}),f(t).map().forEach(function(t){-1<e.indexOf(t)&&n.add(t)}),n}},{key:"eq",value:function(t){return f(this[t])}},{key:"first",value:function(){return this.eq(0)}},{key:"last",value:function(){return this.eq(this.length-1)}},{key:"html",value:function(t){if(void 0===t)return this[0].innerHTML;"string"==typeof t&&this.each(function(){this.innerHTML=t})}},{key:"text",value:function(t){if(void 0===t)return this[0].textContent;"string"==typeof t&&this.each(function(){this.textContent=t})}}])&&a(t.prototype,e),r&&a(t,r),n}();function f(t){return new r(t)}f.fn=r.prototype;var p={handlers:[]},d=history&&history.pushState,y={noTrigger:!1},v={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g,hashQuery:/\?.+/},g={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},w={invalidPath:"Path is invalid"};function m(t){return Array.prototype.slice.call(t)}function b(t){return null!==t&&"object"===h(t)?t:{}}function j(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(y.noTrigger&&e===g.hashchange)y.noTrigger=!1;else{y.data=b(y.data);var r=y.data.data=b(y.data.data),a={eventType:e,hash:!!n,route:t};y.data.data=l({},r,a),S.events.trigger(g.routeChanged,y.data)}}function A(){var t=n(window.location.search),e={};return window.location.hash.match(v.hashQuery)&&(e=n(window.location.hash.match(v.hashQuery)[0])),l({},t,e)}function O(t,e,n){if("string"==typeof(o=t)&&v.pathname.test(o))return r=t,i=n,(a=e)||i?"string"==typeof a?(a=a.trim())&&i?r+window.location.search+"&"+a.replace("?",""):a?r+"?"+a.replace("?",""):r:void 0:r;var r,a,i,o;!function(t){throw new Error(t)}(w.invalidPath)}function x(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function E(t,e,n){if(~e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),v.routeparams.lastIndex=0,!v.routeparams.test(t))return t===e||"*"===t;n.params={};var r=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(r.test(e)){v.routeparams.lastIndex=0;var a=m(t.match(v.routeparams)).map(x),i=m(e.match(r));return i.shift(),a.forEach(function(t,e){n.params[t]=i[e]}),!0}return!1}var S={events:l({},g,{trigger:function(t,e){return function(e,n){(n=b(n)).data=b(n.data);var r=n.data.hash;p.handlers.forEach(function(t){t.eventName===e&&(d&&!r&&E(t.route,window.location.pathname,n)?t.handler(n.data,n.params,A()):r&&(window.location.hash||d||!E(t.route,window.location.pathname,n)?E(t.route,window.location.hash.substring(1),n)&&t.handler(n.data,n.params,A()):(y.data=n.data,window.location.replace("#"+window.location.pathname))))})}.apply(this,[t,e])}}),init:function(){var t={eventType:d?g.popstate:g.hashchange,hash:!d,route:d?window.location.pathname:window.location.hash};this.events.trigger(g.routeChanged,{data:t}),window.location.hash&&f(window).trigger(g.hashchange)},set:function(){return function(t,e,n){if(t){var r=null,a="",i="",o=!1,u=!1,c=e?"replaceState":"pushState";if(y.noTrigger=n,"object"===h(t)?(y.data={data:t.data},r=t.title,a=t.route,i=t.queryString,o=t.appendQuery):"string"==typeof t&&(y.data={data:{}},a=t),"#"===a.charAt(0)&&(u=!0,a=a.replace("#","")),d&&!u){if(history[c](y.data,r,O(a,i,o)),!n){var s={eventType:g.popstate,hash:!1,route:a},f=y.data.data;y.data.data=l({},f,s),S.events.trigger(g.routeChanged,y.data)}}else e?window.location.replace("#"+O(a,i,o)):window.location.hash=O(a,i,o)}}.apply(this,arguments)},historySupported:d};function k(){return function(e,n){var r=this;p.handlers.filter(function(t){return t.originalHandler===n&&t.route===e&&t.element===r}).length||p.handlers.push({eventName:g.routeChanged,originalHandler:n,handler:n.bind(this),element:this,route:e})}.apply(this,arguments)}"function"==typeof jQuery&&jQuery.fn&&(jQuery.route=jQuery.fn.route=k,jQuery.router=S),f(window).on(g.popstate,function(t){j.apply(this,[window.location.pathname,t.type])}),f(window).on(g.hashchange,function(t){j.apply(this,[window.location.hash,t.type,!0])}),t.router=S,t.route=k,Object.defineProperty(t,"__esModule",{value:!0})});
