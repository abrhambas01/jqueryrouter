!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("jquerydeparam")):"function"==typeof define&&define.amd?define(["exports","jquery","jquerydeparam"],e):e(t.jqueryrouter={},t.jQuery,t.deparam)}(this,function(t,e,a){"use strict";function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,a,n;e=r,n=o[a=t],a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n})}return r}e=e&&e.hasOwnProperty("default")?e.default:e,a=a&&a.hasOwnProperty("default")?a.default:a;var r={handlers:[]},l=history&&history.pushState,f={noTrigger:!1},u={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g,hashQuery:/\?.+/},y={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},h={invalidPath:"Path is invalid"};function i(t){return Array.prototype.slice.call(t)}function o(t){return null!==t&&"object"===d(t)?t:{}}function n(t,e){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(f.noTrigger&&e===y.hashchange)f.noTrigger=!1;else{f.data=o(f.data);var n=f.data.data=o(f.data.data),r={eventType:e,hash:!!a,route:t};f.data.data=p({},n,r),v.events.trigger(y.routeChanged,f.data)}}function s(){var t=a(window.location.search),e={};return window.location.hash.match(u.hashQuery)&&(e=a(window.location.hash.match(u.hashQuery)[0])),p({},t,e)}function g(t,e,a){if("string"==typeof(i=t)&&u.pathname.test(i))return n=t,o=a,(r=e)||o?"string"==typeof r?(r=r.trim())&&o?n+window.location.search+"&"+r.replace("?",""):r?n+"?"+r.replace("?",""):n:void 0:n;var n,r,o,i;!function(t){throw new Error(t)}(h.invalidPath)}function c(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function w(t,e,a){if(~e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),u.routeparams.lastIndex=0,!u.routeparams.test(t))return t===e||"*"===t;a.params={};var n=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(n.test(e)){u.routeparams.lastIndex=0;var r=i(t.match(u.routeparams)).map(c),o=i(e.match(n));return o.shift(),r.forEach(function(t,e){a.params[t]=o[e]}),!0}return!1}var m,v={events:p({},y,{trigger:function(t,e){return function(e,a){(a=o(a)).data=o(a.data);var n=a.data.hash;r.handlers.forEach(function(t){t.eventName===e&&(l&&!n&&w(t.route,window.location.pathname,a)?t.handler(a.data,a.params,s()):n&&(window.location.hash||l||!w(t.route,window.location.pathname,a)?w(t.route,window.location.hash.substring(1),a)&&t.handler(a.data,a.params,s()):(f.data=a.data,window.location.replace("#"+window.location.pathname))))})}.apply(this,[t,e])}}),init:function(){var t={eventType:l?y.popstate:y.hashchange,hash:!l,route:l?window.location.pathname:window.location.hash};this.events.trigger(y.routeChanged,{data:t}),window.location.hash&&e(window).trigger(y.hashchange)},set:function(){return function(t,e,a){if(t){var n=null,r="",o="",i=!1,u=!1,h=e?"replaceState":"pushState";if(f.noTrigger=a,"object"===d(t)?(f.data={data:t.data},n=t.title,r=t.route,o=t.queryString,i=t.appendQuery):"string"==typeof t&&(f.data={data:{}},r=t),"#"===r.charAt(0)&&(u=!0,r=r.replace("#","")),l&&!u){if(history[h](f.data,n,g(r,o,i)),!a){var s={eventType:y.popstate,hash:!1,route:r},c=f.data.data;f.data.data=p({},c,s),v.events.trigger(y.routeChanged,f.data)}}else e?window.location.replace("#"+g(r,o,i)):window.location.hash=g(r,o,i)}}.apply(this,arguments)},historySupported:l};function b(){return function(e,a){var n=this;r.handlers.filter(function(t){return t.originalHandler===a&&t.route===e&&t.element===n}).length||r.handlers.push({eventName:y.routeChanged,originalHandler:a,handler:a.bind(this),element:this,route:e})}.apply(this,arguments)}e&&e.fn&&(e.route=e.fn.route=b,e.router=v),(m=e(window)).on(y.popstate,function(t){n.apply(this,[window.location.pathname,t.type])}),m.on(y.hashchange,function(t){n.apply(this,[window.location.hash,t.type,!0])}),t.router=v,t.route=b,Object.defineProperty(t,"__esModule",{value:!0})});
