!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("jquerydeparam")):"function"==typeof define&&define.amd?define(["exports","jquery","jquerydeparam"],e):e((t=t||self).jqueryrouter={},t.jQuery,t.deparam)}(this,function(t,e,a){"use strict";function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,a,n;e=r,n=o[a=t],a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n})}return r}e=e&&e.hasOwnProperty("default")?e.default:e,a=a&&a.hasOwnProperty("default")?a.default:a;var o={handlers:[]},d=history&&history.pushState,f={noTrigger:!1},u={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g,hashQuery:/\?.+/},y={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},h={invalidPath:"Path is invalid"};function i(t){return Array.prototype.slice.call(t)}function s(t){return null!==t&&"object"===p(t)?t:{}}function n(t,e){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(f.noTrigger&&e===y.hashchange)f.noTrigger=!1;else{f.data=s(f.data);var n=f.data.data=s(f.data.data),r={eventType:e,hash:!!a,route:t};f.data.data=c({},n,r),v.events.trigger(y.routeChanged,f.data)}}function r(){var t=a(window.location.search),e={};return window.location.hash.match(u.hashQuery)&&(e=a(window.location.hash.match(u.hashQuery)[0])),c({},t,e)}function g(t,e,a){if("string"==typeof(i=t)&&u.pathname.test(i))return n=t,o=a,(r=e)||o?"string"==typeof r?(r=r.trim())&&o?n+window.location.search+"&"+r.replace("?",""):r?n+"?"+r.replace("?",""):n:void 0:n;var n,r,o,i;!function(t){throw new Error(t)}(h.invalidPath)}function l(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function w(t,e,a){if(~e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),u.routeparams.lastIndex=0,!u.routeparams.test(t))return t===e||"*"===t;a.params={};var n=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(n.test(e)){u.routeparams.lastIndex=0;var r=i(t.match(u.routeparams)).map(l),o=i(e.match(n));return o.shift(),r.forEach(function(t,e){a.params[t]=o[e]}),!0}return!1}var m,v={events:c({},y,{trigger:function(t,e){return function(e,a){(a=s(a)).data=s(a.data);var n=a.data.hash;o.handlers.forEach(function(t){t.eventName===e&&(d&&!n&&w(t.route,window.location.pathname,a)?t.handler(a.data,a.params,r()):n&&(window.location.hash||d||!w(t.route,window.location.pathname,a)?w(t.route,window.location.hash.substring(1),a)&&t.handler(a.data,a.params,r()):(f.data=a.data,window.location.replace("#"+window.location.pathname))))})}.apply(this,[t,e])}}),init:function(){var t={eventType:d?y.popstate:y.hashchange,hash:!d,route:d?window.location.pathname:window.location.hash};this.events.trigger(y.routeChanged,{data:t}),window.location.hash&&e(window).trigger(y.hashchange)},set:function(){return function(t,e,a){if(t){var n=null,r="",o="",i=!1,u=!1,h=e?"replaceState":"pushState";if(f.noTrigger=a,"object"===p(t)?(f.data={data:t.data},n=t.title,r=t.route,o=t.queryString,i=t.appendQuery):"string"==typeof t&&(f.data={data:{}},r=t),"#"===r.charAt(0)&&(u=!0,r=r.replace("#","")),d&&!u){if(history[h](f.data,n,g(r,o,i)),!a){var s={eventType:y.popstate,hash:!1,route:r},l=f.data.data;f.data.data=c({},l,s),v.events.trigger(y.routeChanged,f.data)}}else e?window.location.replace("#"+g(r,o,i)):window.location.hash=g(r,o,i)}}.apply(this,arguments)},historySupported:d};function b(){return function(a,n){var r=this;"function"==typeof a&&(n=a,a="*"),o.handlers.filter(function(t){var e=t.originalHandler===n&&t.route===a;return r&&(e=e&&t.element===r),e}).length||o.handlers.push({eventName:y.routeChanged,originalHandler:n,handler:n.bind(this),element:this,route:a})}.apply(this,arguments)}"function"==typeof e&&(e.route=e.prototype.route=b,e.unroute=e.prototype.unroute=function(){return function(e,a){var n=arguments.length;0===n.length&&(o.handlers.length=0),o.handlers=o.handlers.filter(function(t){return 1===n.length&&"string"==typeof n[0]?t.route!==e:(1===n.length&&"function"==typeof n[0]&&(a=n[0],e="*"),!(t.route===e&&t.handler===a))})}.apply(this,arguments)},e.router=v),(m=e(window)).on(y.popstate,function(t){n.apply(this,[window.location.pathname,t.type])}),m.on(y.hashchange,function(t){n.apply(this,[window.location.hash,t.type,!0])}),t.router=v,t.route=b,Object.defineProperty(t,"__esModule",{value:!0})});
