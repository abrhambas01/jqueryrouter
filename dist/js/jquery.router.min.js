!function(t,e){function r(t){return"number"==typeof t||"string"==typeof t&&!isNaN(+t)}function n(t){return/\[/.test(t)}function a(t,e,c){var l=t.match(/([^\[]+)\[([^\[]*)\]/),s=l[1],p=l[2];if(l&&3===l.length){var f=null;n(t=t.replace(/\[([^\[]*)\]/,""))?(""===p&&(p="0"),t=t.replace(/[^\[]+/,p),null===c[s]&&(c[s]=[null]),a(t,e,f=Array.isArray(c[s])?r(p)?c[s]:c[s]=u(c[s]):"object"==typeof c[s]?c[s]:void 0===c[s]?r(p)?c[s]=[]:c[s]={}:c[s]=[c[s]])):p?(null===c[s]&&(c[s]=[null]),Array.isArray(c[s])?r(p)?c[s][p]=i(e):(c[s]=u(c[s]),c[s][p]=i(e)):"object"==typeof c[s]?c[s][p]=i(e):void 0===c[s]?(r(p)?c[s]=[]:c[s]={},c[s][p]=i(e)):(c[s]=[c[s]],r(p)?c[s][p]=i(e):((f={})[p]=i(e),c[s].push(f)))):o([l[1],e],c,!0)}}function o(t,e,r){var n=t[0],a=i(t[1]);n in e?(e[n]=Array.isArray(e[n])?e[n]:[e[n]],e[n].push(a)):e[n]=r?[a]:a}function i(t){return"string"!=typeof t?"":(t=t.trim())?"undefined"!==t?"null"===t?null:"NaN"===t?NaN:isNaN(+t)?"true"===t.toLowerCase()||"false"!==t.toLowerCase()&&t:+t:void 0:""}function u(t){var e={};return Array.isArray(t)?(t.forEach(function(t,r){e[r]=t}),e):{}}e&&(e.deparam||(e.deparam=function(t){if("string"==typeof t){if(""===(t=decodeURIComponent(t).replace("?","").trim()))return{};var e={};return t.split("&").forEach(function(t){var r=t.split("=");n(r[0])?a(r[0],r[1],e):o(r,e)}),e}}))}(window,window.jQuery),function(t,e,r){function n(t){return Array.prototype.slice.call(t)}function a(t){m.noTrigger?m.noTrigger=!1:e.router.events.trigger(w.routeChanged,{data:m.data},t)}function o(t){throw new Error(t)}function i(t){return"string"==typeof t&&v.pathname.test(t)}function u(e,r,n){return r||n?"string"==typeof r?(r=r.trim())&&n?e+t.location.search+"&"+r.replace("?",""):r?e+"?"+r.replace("?",""):e:void 0:e}function c(){var r=e.deparam(t.location.search),n={};return t.location.hash.match(/\?.+/)&&(n=e.deparam(t.location.hash.match(/\?.+/)[0])),e.extend(r,n)}function l(t,e,r){if(i(t))return u(t,e,r);o(A.invalidPath)}function s(n,a,o){if(n){var i=null,u=null,c="",s="",p=!1,f=!1,h=a?"replaceState":"pushState";m.noTrigger=o,"object"==typeof n?(m.data=i=n.data,u=n.title,c=n.route,s=n.queryString,p=n.appendQuery):"string"==typeof n&&(c=n),"#"===c.charAt(0)&&(f=!0,c=c.replace("#","")),y&&!f?(r[h]({data:i},u,l(c,s,p)),o||e.router.events.trigger(w.routeChanged,{data:m.data})):a?t.location.replace("#"+l(c,s,p)):t.location.hash=l(c,s,p)}}function p(t,e){g.handlers.push({eventName:w.routeChanged,handler:e.bind(this),element:this,route:t})}function f(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function h(t,e,r){if(!v.routeparams.test(t))return t===e;var a=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(a.test(e)){var o=n(t.match(v.routeparams)).map(f),i=n(e.match(a));return i.shift(),o.forEach(function(t,e){r.params[t]=i[e]}),!0}return!1}function d(r,n,a){n=e.extend(n,{}),g.handlers.forEach(function(e){e.eventName===r&&(y&&!a&&h(e.route,t.location.pathname,n)?e.handler(n.data,n.params,c()):!t.location.hash&&h(e.route,t.location.pathname,n)?(m.data=n.data,t.location.replace("#"+t.location.pathname)):h(e.route,t.location.hash.substring(1),n)&&e.handler(n.data,n.params,c()))})}if(e&&e.fn){var g={handlers:[]},y=r&&r.pushState,m={noTrigger:!1},v={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g},w={routeChanged:"routeChanged"},A={invalidPath:"Path is invalid"};if(!e.router){if(e.router={events:w,init:function(){e.router.events.trigger(w.routeChanged)},historySupported:y},e.router.events.trigger=function(t,e){d.apply(this,[t,e])},!e.fn.route){var N=e.fn.route=function(){p.apply(this,arguments)};e.route||(e.route=N.bind(null))}e.setRoute||(e.setRoute=function(){s.apply(this,arguments)}),e.router.set=e.setRoute}g.init=function(){y?e(t).on("popstate",a):e(t).on("hashchange",function(){a.apply(this,[!0])})},g.init()}}(window,window.jQuery,window.history);