!function(t,a){function h(t){return"number"==typeof t||"string"==typeof t&&!isNaN(+t)}function s(t){return/\[/.test(t)}function c(t,a,e){var n=t[0],r=p(t[1]);n in a?(a[n]=Array.isArray(a[n])?a[n]:[a[n]],a[n].push(r)):a[n]=e?[r]:r}function p(t){return"string"!=typeof t?"":(t=t.trim())?"undefined"!==t?"null"===t?null:"NaN"===t?NaN:isNaN(+t)?"true"===t.toLowerCase()||"false"!==t.toLowerCase()&&t:+t:void 0:""}function d(t){var e={};return Array.isArray(t)?(t.forEach(function(t,a){e[a]=t}),e):{}}a&&(a.deparam||(a.deparam=function(t){if("string"==typeof t){if("?"===(t=decodeURIComponent(t).trim()).charAt(0)&&(t=t.replace("?","")),""===t)return{};var a=t.split("&"),e={};return a.forEach(function(t){var a=t.split("=");s(a[0])?function t(a,e,n){var r=a.match(/([^\[]+)\[([^\[]*)\]/),o=r[1],i=r[2];if(r&&3===r.length){a=a.replace(/\[([^\[]*)\]/,"");var u=null;s(a)?(""===i&&(i="0"),a=a.replace(/[^\[]+/,i),null===n[o]&&(n[o]=[null]),u=Array.isArray(n[o])?h(i)?n[o]:n[o]=d(n[o]):"object"==typeof n[o]?n[o]:void 0===n[o]?h(i)?n[o]=[]:n[o]={}:n[o]=[n[o]],t(a,e,u)):i?(null===n[o]&&(n[o]=[null]),Array.isArray(n[o])?(h(i)||(n[o]=d(n[o])),n[o][i]=p(e)):"object"==typeof n[o]?n[o][i]=p(e):void 0===n[o]?(h(i)?n[o]=[]:n[o]={},n[o][i]=p(e)):(n[o]=[n[o]],h(i)?n[o][i]=p(e):((u={})[i]=p(e),n[o].push(u)))):c([r[1],e],n,!0)}}(a[0],a[1],e):c(a,e)}),e}}))}(window,window.jQuery),function(s,c,p){if(c&&c.fn){var r={handlers:[]},d=p&&p.pushState,l={noTrigger:!1},u={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g},f={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},h={invalidPath:"Path is invalid"};if(!c.router){if(c.router={events:f,init:function(){var t={eventType:d?f.popstate:f.hashchange,hash:!d,route:d?s.location.pathname:s.location.hash};c.router.events.trigger(f.routeChanged,{data:t}),s.location.hash&&c(s).trigger(f.hashchange)},historySupported:d},c.router.events.trigger=function(t,a){(function(a,e){(e=c.extend(e,{})).data=c.extend({},e.data);var n=e.data.hash;r.handlers.forEach(function(t){t.eventName===a&&(d&&!n&&m(t.route,s.location.pathname,e)?t.handler(e.data,e.params,o()):n&&(s.location.hash||d||!m(t.route,s.location.pathname,e)?m(t.route,s.location.hash.substring(1),e)&&t.handler(e.data,e.params,o()):(l.data=e.data,s.location.replace("#"+s.location.pathname))))})}).apply(this,[t,a])},!c.fn.route){var t=c.fn.route=function(){(function(t,a){r.handlers.push({eventName:f.routeChanged,handler:a.bind(this),element:this,route:t})}).apply(this,arguments)};c.route||(c.route=t.bind(null))}c.router.set=function(){(function(t,a,e){if(t){var n=null,r="",o="",i=!1,u=!1,h=a?"replaceState":"pushState";l.noTrigger=e,"object"==typeof t?(l.data={data:t.data},n=t.title,r=t.route,o=t.queryString,i=t.appendQuery):"string"==typeof t&&(l.data={data:{}},r=t),"#"===r.charAt(0)&&(u=!0,r=r.replace("#","")),d&&!u?(p[h](l.data,n,g(r,o,i)),e||(l.data.data=c.extend({},l.data.data,{eventType:f.popstate,hash:!1,route:r}),c.router.events.trigger(f.routeChanged,l.data))):a?s.location.replace("#"+g(r,o,i)):s.location.hash=g(r,o,i)}}).apply(this,arguments)}}r.init=function(){c(s).on(f.popstate,function(t){a.apply(this,[s.location.pathname,t.type])}),c(s).on(f.hashchange,function(t){a.apply(this,[s.location.hash,t.type,!0])})},r.init()}function i(t){return Array.prototype.slice.call(t)}function a(t,a,e){e=!!e,l.noTrigger&&a===f.hashchange?l.noTrigger=!1:(l.data=l.data||{data:{}},l.data.data=c.extend({},l.data.data,{eventType:a,hash:e,route:t}),c.router.events.trigger(f.routeChanged,l.data))}function o(){var t=c.deparam(s.location.search),a={};return s.location.hash.match(/\?.+/)&&(a=c.deparam(s.location.hash.match(/\?.+/)[0])),c.extend(t,a)}function g(t,a,e){if("string"==typeof(i=t)&&u.pathname.test(i))return n=t,o=e,(r=a)||o?"string"==typeof r?(r=r.trim())&&o?n+s.location.search+"&"+r.replace("?",""):r?n+"?"+r.replace("?",""):n:void 0:n;var n,r,o,i;!function(t){throw new Error(t)}(h.invalidPath)}function y(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function m(t,a,e){if(~a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),u.routeparams.lastIndex=0,!u.routeparams.test(t))return t===a||"*"===t;e.params={};var n=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(n.test(a)){u.routeparams.lastIndex=0;var r=i(t.match(u.routeparams)).map(y),o=i(a.match(n));return o.shift(),r.forEach(function(t,a){e.params[t]=o[a]}),!0}return!1}}(window,window.jQuery,window.history);