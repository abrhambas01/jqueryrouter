!function(t,a){function e(t){return"number"==typeof t||"string"==typeof t&&!isNaN(+t)}function n(t){return/\[/.test(t)}function r(t,a,h){var c=t.match(/([^\[]+)\[([^\[]*)\]/),s=c[1],p=c[2];if(c&&3===c.length){var d=null;n(t=t.replace(/\[([^\[]*)\]/,""))?(""===p&&(p="0"),t=t.replace(/[^\[]+/,p),null===h[s]&&(h[s]=[null]),r(t,a,d=Array.isArray(h[s])?e(p)?h[s]:h[s]=u(h[s]):"object"==typeof h[s]?h[s]:void 0===h[s]?e(p)?h[s]=[]:h[s]={}:h[s]=[h[s]])):p?(null===h[s]&&(h[s]=[null]),Array.isArray(h[s])?e(p)?h[s][p]=i(a):(h[s]=u(h[s]),h[s][p]=i(a)):"object"==typeof h[s]?h[s][p]=i(a):void 0===h[s]?(e(p)?h[s]=[]:h[s]={},h[s][p]=i(a)):(h[s]=[h[s]],e(p)?h[s][p]=i(a):((d={})[p]=i(a),h[s].push(d)))):o([c[1],a],h,!0)}}function o(t,a,e){var n=t[0],r=i(t[1]);n in a?(a[n]=Array.isArray(a[n])?a[n]:[a[n]],a[n].push(r)):a[n]=e?[r]:r}function i(t){return"string"!=typeof t?"":(t=t.trim())?"undefined"!==t?"null"===t?null:"NaN"===t?NaN:isNaN(+t)?"true"===t.toLowerCase()||"false"!==t.toLowerCase()&&t:+t:void 0:""}function u(t){var a={};return Array.isArray(t)?(t.forEach(function(t,e){a[e]=t}),a):{}}a&&(a.deparam||(a.deparam=function(t){if("string"==typeof t){if(""===(t=decodeURIComponent(t).replace("?","").trim()))return{};var a={};return t.split("&").forEach(function(t){var e=t.split("=");n(e[0])?r(e[0],e[1],a):o(e,a)}),a}}))}(window,window.jQuery),function(t,a,e){function n(t){return Array.prototype.slice.call(t)}function r(t,e,n){n=!!n,m.noTrigger&&e===w.hashchange?m.noTrigger=!1:(m.data=m.data||{data:{}},m.data.data=a.extend({},m.data.data,{eventType:e,hash:n,route:t}),a.router.events.trigger(w.routeChanged,m.data))}function o(t){throw new Error(t)}function i(t){return"string"==typeof t&&v.pathname.test(t)}function u(a,e,n){return e||n?"string"==typeof e?(e=e.trim())&&n?a+t.location.search+"&"+e.replace("?",""):e?a+"?"+e.replace("?",""):a:void 0:a}function h(){var e=a.deparam(t.location.search),n={};return t.location.hash.match(/\?.+/)&&(n=a.deparam(t.location.hash.match(/\?.+/)[0])),a.extend(e,n)}function c(t,a,e){if(i(t))return u(t,a,e);o(A.invalidPath)}function s(n,r,o){if(n){var i=null,u="",h="",s=!1,p=!1,d=r?"replaceState":"pushState";m.noTrigger=o,"object"==typeof n?(m.data={data:n.data},i=n.title,u=n.route,h=n.queryString,s=n.appendQuery):"string"==typeof n&&(m.data={data:{}},u=n),"#"===u.charAt(0)&&(p=!0,u=u.replace("#","")),y&&!p?(e[d](m.data,i,c(u,h,s)),o||(m.data.data=a.extend({},m.data.data,{eventType:w.popstate,hash:!1,route:u}),a.router.events.trigger(w.routeChanged,m.data))):r?t.location.replace("#"+c(u,h,s)):t.location.hash=c(u,h,s)}}function p(t,a){g.handlers.push({eventName:w.routeChanged,handler:a.bind(this),element:this,route:t})}function d(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function l(t,a,e){if(~a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),!v.routeparams.test(t))return t===a||"*"===t;e.params={};var r=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(r.test(a)){var o=n(t.match(v.routeparams)).map(d),i=n(a.match(r));return i.shift(),o.forEach(function(t,a){e.params[t]=i[a]}),!0}return!1}function f(e,n){(n=a.extend(n,{})).data=a.extend({},n.data);var r=n.data.hash;g.handlers.forEach(function(a){a.eventName===e&&(y&&!r&&l(a.route,t.location.pathname,n)?a.handler(n.data,n.params,h()):r&&(t.location.hash||y||!l(a.route,t.location.pathname,n)?l(a.route,t.location.hash.substring(1),n)&&a.handler(n.data,n.params,h()):(m.data=n.data,t.location.replace("#"+t.location.pathname))))})}if(a&&a.fn){var g={handlers:[]},y=e&&e.pushState,m={noTrigger:!1},v={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g},w={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},A={invalidPath:"Path is invalid"};if(!a.router){if(a.router={events:w,init:function(){var e={eventType:y?w.popstate:w.hashchange,hash:!y,route:y?t.location.pathname:t.location.hash};a.router.events.trigger(w.routeChanged,{data:e}),t.location.hash&&a(t).trigger(w.hashchange)},historySupported:y},a.router.events.trigger=function(t,a){f.apply(this,[t,a])},!a.fn.route){var N=a.fn.route=function(){p.apply(this,arguments)};a.route||(a.route=N.bind(null))}a.router.set=function(){s.apply(this,arguments)}}g.init=function(){a(t).on(w.popstate,function(a){r.apply(this,[t.location.pathname,a.type])}),a(t).on(w.hashchange,function(a){r.apply(this,[t.location.hash,a.type,!0])})},g.init()}}(window,window.jQuery,window.history);