!function(t,e){function n(t){return"number"==typeof t||"string"==typeof t&&!isNaN(+t)}function r(t){return/\[/.test(t)}function a(t,e,u){var c=t.match(/([^\[]+)\[([^\[]*)\]/),l=c[1],s=c[2];if(c&&3===c.length){var p=null;r(t=t.replace(/\[([^\[]*)\]/,""))?(""===s&&(s="0"),t=t.replace(/[^\[]+/,s),null===u[l]&&(u[l]=[null]),Array.isArray(u[l])?n(s)?p=u[l]:(p={},u[l].push(p)):p="object"==typeof u[l]?u[l]:void 0===u[l]?n(s)?u[l]=[]:u[l]={}:u[l]=[u[l]],a(t,e,p)):s?(null===u[l]&&(u[l]=[null]),Array.isArray(u[l])?n(s)?u[l][s]=i(e):((p={})[s]=i(e),u[l].push(p)):"object"==typeof u[l]?u[l][s]=i(e):void 0===u[l]?(n(s)?u[l]=[]:u[l]={},u[l][s]=i(e)):(u[l]=[u[l]],n(s)?u[l][s]=i(e):((p={})[s]=i(e),u[l].push(p)))):o([c[1],e],u,!0)}}function o(t,e,n){var r=t[0],a=i(t[1]);r in e?(e[r]=Array.isArray(e[r])?e[r]:[e[r]],e[r].push(a)):e[r]=n?[a]:a}function i(t){return"string"!=typeof t?"":(t=t.trim())?"undefined"!==t?"null"===t?null:"NaN"===t?NaN:isNaN(+t)?"true"===t.toLowerCase()||"false"!==t.toLowerCase()&&t:+t:void 0:""}e&&(e.deparam||(e.deparam=function(t){if("string"==typeof t){if(""===(t=decodeURIComponent(t).replace("?","").trim()))return{};var e={};return t.split("&").forEach(function(t){var n=t.split("=");r(n[0])?a(n[0],n[1],e):o(n,e)}),e}}))}(window,window.jQuery),function(t,e,n){function r(t){return Array.prototype.slice.call(t)}function a(){y.noTrigger?y.noTrigger=!1:e.router.events.trigger(w.routeChanged,{data:y.data})}function o(t){throw new Error(t)}function i(t){return"string"==typeof t&&v.pathname.test(t)}function u(e,n,r){return n||r?"string"==typeof n?(n=n.trim())&&r?e+t.location.search+"&"+n.replace("?",""):n?e+"?"+n.replace("?",""):e:void 0:e}function c(){var n=e.deparam(t.location.search),r={};return t.location.hash.match(/\?.+/)&&(r=e.deparam(t.location.hash.match(/\?.+/)[0])),e.extend(n,r)}function l(t,e,n){if(i(t))return u(t,e,n);o(N.invalidPath)}function s(r,a,o){var i=null,u=null,c="",s="",p=!1,h=a?"replaceState":"pushState";y.noTrigger=o,"object"==typeof r?(y.data=i=r.data,u=r.title,c=r.route,s=r.queryString,p=r.appendQuery):"string"==typeof r&&(c=r),m?(n[h]({data:i},u,l(c,s,p)),o||e.router.events.trigger(w.routeChanged,{data:y.data})):a?t.location.replace("#"+l(c,s,p)):t.location.hash=l(c,s,p)}function p(t,e){g.handlers.push({eventName:w.routeChanged,handler:e.bind(this),element:this,route:t})}function h(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function f(t,e,n){if(!v.routeparams.test(t))return t===e;var a=new RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(a.test(e)){var o=r(t.match(v.routeparams)).map(h),i=r(e.match(a));return i.shift(),o.forEach(function(t,e){n.params[t]=i[e]}),!0}return!1}function d(n,r){r=e.extend(r,{}),g.handlers.forEach(function(e){e.eventName===n&&(m&&f(e.route,t.location.pathname,r)?e.handler(r.data,r.params,c()):!t.location.hash&&f(e.route,t.location.pathname,r)?(y.data=r.data,t.location.replace("#"+t.location.pathname)):f(e.route,t.location.hash.substring(1),r)&&e.handler(r.data,r.params,c()))})}if(e&&e.fn){var g={handlers:[]},m=n&&n.pushState,y={noTrigger:!1},v={pathname:/^\/(?=[^?]+)/,routeparams:/:[^\/]+/g},w={routeChanged:"routeChanged"},N={invalidPath:"Path is invalid"};if(e.router||(e.router={events:w,init:function(){e.router.events.trigger(w.routeChanged)},historySupported:m},e.router.events.trigger=function(t,e){d.apply(this,[t,e])}),!e.fn.route){var A=e.fn.route=function(t,e){p.apply(this,[t,e])};e.route||(e.route=A.bind(null))}e.setRoute||(e.setRoute=function(t,e,n){s.apply(this,[t,e,n])}),g.init=function(){m?e(t).on("popstate",a):e(t).on("hashchange",a)},g.init()}}(window,window.jQuery,window.history);